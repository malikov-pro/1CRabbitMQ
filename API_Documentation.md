# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API –≤–Ω–µ—à–Ω–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã 1CRabbitMQ

## 1. –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (API) –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±—Ä–æ–∫–µ—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π RabbitMQ –∏–∑ —Å—Ä–µ–¥—ã 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ. API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–∞—Ö –æ–±—ä–µ–∫—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `–ö–ª–∏–µ–Ω—ÇRMQ`.

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±–µ—Ä—Ç–∫—É –Ω–∞–¥ –Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–π –Ω–∞ Rust ([lapin 3.2.0](https://github.com/amqp-rs/lapin)), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (Windows x64, Linux x64).

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ 1–°:**
    - **Windows:** 8.3.21 –∏ –≤—ã—à–µ (—Å–≤—è–∑–∞–Ω–æ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ)
      - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ `addnhost64`, –Ω–µ –≤ `rphost`
      - –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –æ—à–∏–±–∫–∏ –Ω–µ —Ä–æ–Ω—è—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å
    - **Linux:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –≤–µ—Ä—Å–∏—é –Ω–µ—Ç
- **–†–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å:** –¢–æ–ª—å–∫–æ x86-64
- **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**. –í—Å–µ –≤—ã–∑–æ–≤—ã API –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (`&–ù–∞–°–µ—Ä–≤–µ—Ä–µ`, —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è, —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è)

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`.dll` –¥–ª—è Windows, `.so` –¥–ª—è Linux) –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –º–∞–∫–µ—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ `–ö–ª–∏–µ–Ω—ÇRMQ`. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ API –º–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –û–° –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é.

### –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

–û—Å–Ω–æ–≤–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É`. –û–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –≤–Ω–µ—à–Ω—é—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º RabbitMQ.

```bsl
// ‚ö†Ô∏è –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!
&–ù–∞–°–µ—Ä–≤–µ—Ä–µ
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–º–µ—Ä–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è–ù–∞–°–µ—Ä–≤–µ—Ä–µ()
    –ö–ª–∏–µ–Ω—ÇRMQ = –û–±—Ä–∞–±–æ—Ç–∫–∏.–ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å();
    –°—Ç—Ä–æ–∫–∞–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "amqp://guest:guest@localhost:5672/%2f";
    –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É(–°—Ç—Ä–æ–∫–∞–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è);
    
    –ï—Å–ª–∏ –ö–ª–∏–µ–Ω—ÇRMQ.–≠—Ç–æ–û—à–∏–±–∫–∞(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ) –¢–æ–≥–¥–∞
        –°–æ–æ–±—â–∏—Ç—å(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.–¢–µ–∫—Å—Ç);
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    // –î–∞–ª—å–Ω–µ–π—à–∞—è —Ä–∞–±–æ—Ç–∞...
    
    –ö–ª–∏–µ–Ω—ÇRMQ.–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—Ç–°–µ—Ä–≤–µ—Ä–∞(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ);
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã
```

---

## 3. –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (`Connect`):** –°—Ç—Ä—É–∫—Ç—É—Ä–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–µ–π `–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É`. –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±—Ä–æ–∫–µ—Ä–æ–º.
- **–ö–∞–Ω–∞–ª (`Channel`):** "–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ" —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –Ø–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±–ª–∞—Å—Ç—å—é –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π (–ø—É–±–ª–∏–∫–∞—Ü–∏—è, —á—Ç–µ–Ω–∏–µ, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π). –°–æ–∑–¥–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `–°–æ–∑–¥–∞—Ç—å–ö–∞–Ω–∞–ª`.
- **–ü–æ–ª—É—á–∞—Ç–µ–ª—å (`Consumer`):** –°—Ç—Ä—É–∫—Ç—É—Ä–∞, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π. –°–æ–∑–¥–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è`.
- **–°–æ–æ–±—â–µ–Ω–∏–µ (`Message`):** –°—Ç—Ä—É–∫—Ç—É—Ä–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –¥–∞–Ω–Ω—ã–µ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Å–≤–æ–π—Å—Ç–≤–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏) —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∏–∑ –æ—á–µ—Ä–µ–¥–∏.
- **–û—á–µ—Ä–µ–¥—å (`Queue`):** –ë—É—Ñ–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–æ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏.
- **–û–±–º–µ–Ω–Ω–∏–∫ (`Exchange`):** –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –∏—Ö –ø–æ –æ—á–µ—Ä–µ–¥—è–º —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏ –∫–ª—é—á–∞–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.

---

## 4. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ API

–ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –º–æ–¥—É–ª—è `–ö–ª–∏–µ–Ω—ÇRMQ` —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏.

### 4.1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

#### `–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É(–°—Ç—Ä–æ–∫–∞–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è)`

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º RabbitMQ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–°—Ç—Ä–æ–∫–∞–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è` (–°—Ç—Ä–æ–∫–∞) ‚Äî URI –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ AMQP:  
  `amqp://username:password@host:port/vhost`
  - `username`, `password` ‚Äî —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `guest:guest`)
  - `host` ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `localhost`, `192.168.1.10`)
  - `port` ‚Äî AMQP –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `5672`)
  - `vhost` ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/`, –≤ URL –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `%2f`)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (`–¢–∏–ø="Connect"`) –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—à–∏–±–∫–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```bsl
// –õ–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ credentials
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É("amqp://guest:guest@localhost:5672/%2f");

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É("amqp://admin:secret@192.168.1.100:5672/%2f");

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞—Å—Ç–æ–º–Ω–æ–º—É vhost
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É("amqp://user:pass@localhost:5672/production");
```

#### `–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—Ç–°–µ—Ä–≤–µ—Ä–∞(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)`

–ó–∞–∫—Ä—ã–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä–æ–∫–∞` ‚Äî —Å—Ç–∞—Ç—É—Å –æ—Ç–∫–ª—é—á–µ–Ω–∏—è

**–í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤!

#### `–ó–∞–∫—Ä—ã—Ç—å–í—Å–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è()`

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä–æ–∫–∞` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

> **‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∞–≤–∞—Ä–∏–π–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏). –û–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ `–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—Ç–°–µ—Ä–≤–µ—Ä–∞()`.

---

### 4.2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏

#### `–°–æ–∑–¥–∞—Ç—å–ö–∞–Ω–∞–ª(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–ü—É–±–ª–∏–∫–∞—Ü–∏–π–û—Ç–°–µ—Ä–≤–µ—Ä–∞, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö–ù–µ–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö–°–æ–æ–±—â–µ–Ω–∏–π)`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª –≤ —Ä–∞–º–∫–∞—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–ü—É–±–ª–∏–∫–∞—Ü–∏–π–û—Ç–°–µ—Ä–≤–µ—Ä–∞` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º `Publisher Confirms` –¥–ª—è –∫–∞–Ω–∞–ª–∞
  - `–ò—Å—Ç–∏–Ω–∞` ‚Äî —Å–µ—Ä–≤–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö–ù–µ–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö–°–æ–æ–±—â–µ–Ω–∏–π` (–ß–∏—Å–ª–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `prefetch_count` (QoS)
  - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª—é –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - `0` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
  - `1` ‚Äî —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (Fair Dispatch)
  - `> 1` ‚Äî –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞ (`–¢–∏–ø="Channel"`) –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—à–∏–±–∫–∏

**–ü—Ä–∏–º–µ—Ä—ã:**

```bsl
// –ü—Ä–æ—Å—Ç–æ–π –∫–∞–Ω–∞–ª
–ö–∞–Ω–∞–ª = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ö–∞–Ω–∞–ª(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ);

// –ö–∞–Ω–∞–ª —Å Publisher Confirms (–¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
–ö–∞–Ω–∞–ª = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ö–∞–Ω–∞–ª(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ò—Å—Ç–∏–Ω–∞);

// –ö–∞–Ω–∞–ª —Å QoS = 1 (—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á)
–ö–∞–Ω–∞–ª = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ö–∞–Ω–∞–ª(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –õ–æ–∂—å, 1);

// –ö–∞–Ω–∞–ª —Å –æ–±–æ–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
–ö–∞–Ω–∞–ª = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ö–∞–Ω–∞–ª(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ò—Å—Ç–∏–Ω–∞, 10);
```

> **üí° –í–∞–∂–Ω–æ:** –ü–∞—Ä–∞–º–µ—Ç—Ä `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö–ù–µ–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö–°–æ–æ–±—â–µ–Ω–∏–π` ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å `prefetch_count` (QoS). –û–Ω –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª—é –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `1` –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–¥–∞—á –º–µ–∂–¥—É –≤–æ—Ä–∫–µ—Ä–∞–º–∏.

#### `–ó–∞–∫—Ä—ã—Ç—å–ö–∞–Ω–∞–ª(–ö–∞–Ω–∞–ª)`

–ó–∞–∫—Ä—ã–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–∞–Ω–∞–ª` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä–æ–∫–∞` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

---

### 4.3. –û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π

#### `–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, –ò–º—è–û—á–µ—Ä–µ–¥–∏, –ö–ª—é—á–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –¢–æ—á–∫–∞–û–±–º–µ–Ω–∞, –°–æ—Ö—Ä–∞–Ω—è—Ç—å–û—á–µ—Ä–µ–¥—å, –û—á–µ—Ä–µ–¥—å–î–æ—Å—Ç—É–ø–Ω–∞–¢–æ–ª—å–∫–æ–û–¥–Ω–æ–º—É–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—é–ö–æ—Ç–æ—Ä–æ–µ–ï–µ–°–æ–∑–¥–∞–ª–æ–ò–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞–î—Ä—É–≥–∏–º, –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ–ü–æ—Å–ª–µ–û—Ç–∫–ª—é—á–µ–Ω–∏—è–ü–æ—Å–ª–µ–¥–Ω–µ–≥–æ–ü–æ–¥–ø–∏—Å—á–∏–∫–∞, –ê—Ä–≥—É–º–µ–Ω—Ç—ã)`

–û–±—ä—è–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∏–≤—è–∑–∫—É (`binding`) –∫ —Ç–æ—á–∫–µ –æ–±–º–µ–Ω–∞. –ú–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–µ –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–∞–Ω–∞–ª` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞
- `–ò–º—è–û—á–µ—Ä–µ–¥–∏` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è –æ—á–µ—Ä–µ–¥–∏
  - –ï—Å–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ `""`, —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞—Å—Ç –æ—á–µ—Ä–µ–¥—å —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º (–¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π)
- `–ö–ª—é—á–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏` (–°—Ç—Ä–æ–∫–∞) ‚Äî binding key –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –æ—á–µ—Ä–µ–¥–∏ –∫ —Ç–æ—á–∫–µ –æ–±–º–µ–Ω–∞
- `–¢–æ—á–∫–∞–û–±–º–µ–Ω–∞` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è —Ç–æ—á–∫–∏ –æ–±–º–µ–Ω–∞ (exchange), –∫ –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –æ—á–µ—Ä–µ–¥—å
- `–°–æ—Ö—Ä–∞–Ω—è—Ç—å–û—á–µ—Ä–µ–¥—å` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî `durable`
  - `–ò—Å—Ç–∏–Ω–∞` ‚Äî –æ—á–µ—Ä–µ–¥—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –æ—á–µ—Ä–µ–¥—å —É–¥–∞–ª–∏—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
- `–û—á–µ—Ä–µ–¥—å–î–æ—Å—Ç—É–ø–Ω–∞–¢–æ–ª—å–∫–æ–û–¥–Ω–æ–º—É–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—é–ö–æ—Ç–æ—Ä–æ–µ–ï–µ–°–æ–∑–¥–∞–ª–æ–ò–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞–î—Ä—É–≥–∏–º` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî `exclusive`
  - `–ò—Å—Ç–∏–Ω–∞` ‚Äî –æ—á–µ—Ä–µ–¥—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–º—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∏ —É–¥–∞–ª–∏—Ç—Å—è –ø–æ—Å–ª–µ –µ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –æ—á–µ—Ä–µ–¥—å –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º
- `–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ–ü–æ—Å–ª–µ–û—Ç–∫–ª—é—á–µ–Ω–∏—è–ü–æ—Å–ª–µ–¥–Ω–µ–≥–æ–ü–æ–¥–ø–∏—Å—á–∏–∫–∞` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî `auto-delete`
  - `–ò—Å—Ç–∏–Ω–∞` ‚Äî –æ—á–µ—Ä–µ–¥—å —É–¥–∞–ª–∏—Ç—Å—è, –∫–æ–≥–¥–∞ –æ—Ç –Ω–µ–µ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –æ—á–µ—Ä–µ–¥—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
- `–ê—Ä–≥—É–º–µ–Ω—Ç—ã` (–ú–∞—Å—Å–∏–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—á–µ—Ä–µ–¥–∏
  - –°–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç`
  - –ü—Ä–∏–º–µ—Ä—ã: `x-dead-letter-exchange`, `x-message-ttl`, `x-max-length` –∏ –¥—Ä.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ (`–¢–∏–ø="Queue"`) —Å –ø–æ–ª—è–º–∏:
- `–ò–º—è–û—á–µ—Ä–µ–¥–∏` ‚Äî –∏–º—è –æ—á–µ—Ä–µ–¥–∏ (–∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π)
- `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–°–æ–æ–±—â–µ–Ω–∏–π` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏
- `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π

**–ü—Ä–∏–º–µ—Ä—ã:**

```bsl
// –ü—Ä–æ—Å—Ç–∞—è –æ—á–µ—Ä–µ–¥—å
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "my_queue");

// Durable –æ—á–µ—Ä–µ–¥—å (–ø–µ—Ä–µ–∂–∏–≤–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å–µ—Ä–≤–µ—Ä–∞)
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "task_queue", "", "", –ò—Å—Ç–∏–Ω–∞);

// –í—Ä–µ–º–µ–Ω–Ω–∞—è —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –æ—á–µ—Ä–µ–¥—å (–¥–ª—è Pub/Sub)
–û—á–µ—Ä–µ–¥—å = –ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "", "", "logs", –õ–æ–∂—å, –ò—Å—Ç–∏–Ω–∞, –ò—Å—Ç–∏–Ω–∞);
–ò–º—è–í—Ä–µ–º–µ–Ω–Ω–æ–π–û—á–µ—Ä–µ–¥–∏ = –û—á–µ—Ä–µ–¥—å.–ò–º—è–û—á–µ—Ä–µ–¥–∏; // —Å–µ—Ä–≤–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –∏–º—è —Ç–∏–ø–∞ "amq.gen-..."

// –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–±–º–µ–Ω–Ω–∏–∫—É direct —Å –∫–ª—é—á–æ–º
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "errors", "error", "direct_logs");

// –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–≤—è–∑–∫–∏ (–¥–ª—è routing)
–ò–º—è–û—á–µ—Ä–µ–¥–∏ = "multi_severity";
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, –ò–º—è–û—á–µ—Ä–µ–¥–∏, "error", "direct_logs");
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, –ò–º—è–û—á–µ—Ä–µ–¥–∏, "warning", "direct_logs");
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, –ò–º—è–û—á–µ—Ä–µ–¥–∏, "info", "direct_logs");
```

> **üí° –°–æ–≤–µ—Ç:** –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ `–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å` —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º –æ—á–µ—Ä–µ–¥–∏, –Ω–æ —Ä–∞–∑–Ω—ã–º–∏ `–ö–ª—é—á–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏` —Å–æ–∑–¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–≤—è–∑–∫–∏ (bindings). –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ routing keys.

> **‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –Ø–≤–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–æ—á–∫–∏ –æ–±–º–µ–Ω–∞ (exchange) –≤ API –Ω–µ—Ç. –û–±–º–µ–Ω–Ω–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ —á–µ—Ä–µ–∑ Management UI –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ (`amq.direct`, `amq.fanout`, `amq.topic`).

---

### 4.4. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

#### `–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ, –ö–ª—é—á–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –¢–æ—á–∫–∞–û–±–º–µ–Ω–∞, –°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å–î–∞–Ω–Ω—ã–µ, –°–æ—Ö—Ä–∞–Ω–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ–ù–∞–î–∏—Å–∫–µ, –°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è, –ó–∞–≥–æ–ª–æ–≤–∫–∏, –ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è)`

–ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ RabbitMQ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–∞–Ω–∞–ª` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞
- `–î–∞–Ω–Ω—ã–µ` (–°—Ç—Ä–æ–∫–∞, –°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
  - –°—Ç—Ä—É–∫—Ç—É—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è –≤ JSON
- `–ö–ª—é—á–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏` (–°—Ç—Ä–æ–∫–∞) ‚Äî routing key, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –æ–±–º–µ–Ω–Ω–∏–∫–æ–º –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
  - –î–ª—è default exchange: routing key = –∏–º—è –æ—á–µ—Ä–µ–¥–∏
- `–¢–æ—á–∫–∞–û–±–º–µ–Ω–∞` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è —Ç–æ—á–∫–∏ –æ–±–º–µ–Ω–∞
  - –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ `""` = default exchange (—Å–æ–æ–±—â–µ–Ω–∏–µ –∏–¥–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –≤ –æ—á–µ—Ä–µ–¥—å)
- `–°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å–î–∞–Ω–Ω—ã–µ` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä
  - `–ò—Å—Ç–∏–Ω–∞` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ JSON
  - `–õ–æ–∂—å` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
- `–°–æ—Ö—Ä–∞–Ω–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ–ù–∞–î–∏—Å–∫–µ` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî `persistent`
  - `–ò—Å—Ç–∏–Ω–∞` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ (–ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –æ—á–µ—Ä–µ–¥—å `durable`)
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏
- `–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  - –°–æ–∑–¥–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `–ù–æ–≤—ã–µ–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è()`
  - –ü–æ–ª—è: `reply_to`, `correlation_id`, `expiration`, `content_type` –∏ –¥—Ä.
- `–ó–∞–≥–æ–ª–æ–≤–∫–∏` (–ú–∞—Å—Å–∏–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
  - –°–æ–∑–¥–∞—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫()`
- `–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∂–∞—Ç–∏—è —Ç–µ–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  - –°–æ–∑–¥–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è()`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º `Publisher Confirms`, —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ –ø–æ–ª–µ `–¢–µ–∫—Å—Ç`

**–ü—Ä–∏–º–µ—Ä—ã:**

```bsl
// –ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, "Hello, World!", "my_queue");

// Persistent —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ durable –æ—á–µ—Ä–µ–¥—å (–¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, "Important Task", "task_queue", "", –ò—Å—Ç–∏–Ω–∞, –ò—Å—Ç–∏–Ω–∞);

// Pub/Sub —á–µ—Ä–µ–∑ fanout exchange
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, "Log message", "", –ö–ª–∏–µ–Ω—ÇRMQ.Exchange_fanout());

// Routing —á–µ—Ä–µ–∑ direct exchange —Å –∫–ª—é—á–æ–º
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, "Critical error!", "error", "direct_logs");

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)
–î–∞–Ω–Ω—ã–µ = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞("–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ", "–¢–æ–≤–∞—Ä –ê", 10);
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ, "orders");

// RPC —Å reply_to –∏ correlation_id
–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è = –ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–µ–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è();
–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è.reply_to = "amq.gen-XYZ123";
–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è.correlation_id = "request-001";
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, "30", "rpc_queue", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è);

// –° –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ;
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫("x-source", "1C", –ó–∞–≥–æ–ª–æ–≤–∫–∏);
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫("x-priority", "high", –ó–∞–≥–æ–ª–æ–≤–∫–∏);
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ, "queue", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –ó–∞–≥–æ–ª–æ–≤–∫–∏);

// –°–æ —Å–∂–∞—Ç–∏–µ–º (–¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è = –ö–ª–∏–µ–Ω—ÇRMQ.–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è(–ö–ª–∏–µ–Ω—ÇRMQ.–ê–ª–≥–æ—Ä–∏—Ç–º–°–∂–∞—Ç–∏—è_zstd(), 22);
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –ë–æ–ª—å—à–∏–µ–î–∞–Ω–Ω—ã–µ, "big_data", "", –ò—Å—Ç–∏–Ω–∞, –ò—Å—Ç–∏–Ω–∞, –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è);
```

---

### 4.5. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

#### `–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ö–∞–Ω–∞–ª, –ò–º—è–û—á–µ—Ä–µ–¥–∏, –¢—ç–≥–ü–æ–ª—É—á–∞—Ç–µ–ª—è, no_ack, exclusive, no_local, nowait, –¢–∞–π–º–∞—É—Ç, –ê—Ä–≥—É–º–µ–Ω—Ç—ã)`

–°–æ–∑–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ (consumer) –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –æ—á–µ—Ä–µ–¥—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–∞–Ω–∞–ª` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞
- `–ò–º—è–û—á–µ—Ä–µ–¥–∏` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
- `–¢—ç–≥–ü–æ–ª—É—á–∞—Ç–µ–ª—è` (–°—Ç—Ä–æ–∫–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞—Ç–µ–ª—è
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Management UI –≤ —Ä–∞–∑–¥–µ–ª–µ Consumers
  - –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –æ—Ç–º–µ–Ω—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `–û—Ç–º–µ–Ω–∏—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è()`
- `no_ack` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Ä–µ–∂–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - `–ò—Å—Ç–∏–Ω–∞` = auto-ack (—Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ)
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) = manual ack (—Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ`)
- `exclusive` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å
  - `–ò—Å—Ç–∏–Ω–∞` = —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –æ—á–µ—Ä–µ–¥–∏
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) = —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- `no_local` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - `–ò—Å—Ç–∏–Ω–∞` = –Ω–µ –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —ç—Ç–æ –∂–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) = –ø–æ–ª—É—á–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `nowait` (–ë—É–ª–µ–≤–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
  - `–ò—Å—Ç–∏–Ω–∞` = –Ω–µ –∂–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
  - `–õ–æ–∂—å` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) = –∂–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- `–¢–∞–π–º–∞—É—Ç` (–ß–∏—Å–ª–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
  - **–í–∞–∂–Ω–æ:** –≠—Ç–æ —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è, –∞ –Ω–µ –±–µ–∑—É—Å–ª–æ–≤–Ω–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ
  - –¢–∞–π–º–∞—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–æ –Ω–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–∏ –∫–æ–º–∞–Ω–¥ ping
  - –¢–∞–π–º–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `–ê—Ä–≥—É–º–µ–Ω—Ç—ã` (–ú–∞—Å—Å–∏–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
  - –°–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç()`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞—Ç–µ–ª—è (`–¢–∏–ø="Consumer"`) –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—à–∏–±–∫–∏

**–ü—Ä–∏–º–µ—Ä—ã:**

```bsl
// –ü–æ–ª—É—á–∞—Ç–µ–ª—å —Å —Ä—É—á–Ω—ã–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)
–ü–æ–ª—É—á–∞—Ç–µ–ª—å = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ö–∞–Ω–∞–ª, "task_queue", "", –õ–æ–∂—å);

// –ü–æ–ª—É—á–∞—Ç–µ–ª—å —Å auto-ack (–±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –º–µ–Ω–µ–µ –Ω–∞–¥–µ–∂–Ω–æ)
–ü–æ–ª—É—á–∞—Ç–µ–ª—å = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ö–∞–Ω–∞–ª, "logs", "", –ò—Å—Ç–∏–Ω–∞);

// –ü–æ–ª—É—á–∞—Ç–µ–ª—å —Å —Ç–∞–π–º–∞—É—Ç–æ–º 30 —Å–µ–∫—É–Ω–¥ –∏ —Ç–µ–≥–æ–º
–ü–æ–ª—É—á–∞—Ç–µ–ª—å = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ö–∞–Ω–∞–ª, "task_queue", "worker-1", –õ–æ–∂—å, –õ–æ–∂—å, –õ–æ–∂—å, –õ–æ–∂—å, 30000);

// –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–æ—Ä–∫–µ—Ä)
–ü–æ–ª—É—á–∞—Ç–µ–ª—å = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ö–∞–Ω–∞–ª, "exclusive_tasks", "solo-worker", –õ–æ–∂—å, –ò—Å—Ç–∏–Ω–∞);
```

> **üí° –°–æ–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `–¢—ç–≥–ü–æ–ª—É—á–∞—Ç–µ–ª—è` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤ –≤ Management UI –∏ –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `–û—Ç–º–µ–Ω–∏—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è()`.

#### `–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ(–ü–æ–ª—É—á–∞—Ç–µ–ª—å)`

**–ë–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è** –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ü–∏–∫–ª–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ü–æ–ª—É—á–∞—Ç–µ–ª—å` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞—Ç–µ–ª—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–ë—É–ª–µ–≤–æ`
- `–ò—Å—Ç–∏–Ω–∞` ‚Äî –ø–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –∏–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (ping)
- `–õ–æ–∂—å` ‚Äî –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, —Ç–∞–π–º–∞—É—Ç –∏–ª–∏ –ø—Ä–∏—à–ª–∞ –∫–æ–º–∞–Ω–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

**–ü—Ä–∏–º–µ—Ä:**

```bsl
–ü–æ–ª—É—á–∞—Ç–µ–ª—å = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ö–∞–Ω–∞–ª, "task_queue", "", –õ–æ–∂—å);

–ü–æ–∫–∞ –ö–ª–∏–µ–Ω—ÇRMQ.–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ(–ü–æ–ª—É—á–∞—Ç–µ–ª—å) –¶–∏–∫–ª
    –î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è = –ö–ª–∏–µ–Ω—ÇRMQ.–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è();
    
    –ï—Å–ª–∏ –ö–ª–∏–µ–Ω—ÇRMQ.–≠—Ç–æ–û—à–∏–±–∫–∞(–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è) –¢–æ–≥–¥–∞
        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –ü–æ–ø—ã—Ç–∫–∞
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        –í—ã–ø–æ–ª–Ω–∏—Ç—å–ó–∞–¥–∞—á—É(–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è.–î–∞–Ω–Ω—ã–µ);
        
        // –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É—Å–ø–µ—à–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
        –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è.–¢–µ–≥);
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        // –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å
        –ö–ª–∏–µ–Ω—ÇRMQ.–û—Ç–∫–ª–æ–Ω–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è.–¢–µ–≥, –ò—Å—Ç–∏–Ω–∞);
        –ó–∞–ø–∏—Å—å–õ–æ–≥–∞–°–∏—Å—Ç–µ–º—ã("RabbitMQ", –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
```

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** `–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ()` –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫! –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ —Ñ–æ–Ω–æ–≤–æ–º –∑–∞–¥–∞–Ω–∏–∏ –∏–ª–∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–Ω–æ–º –∑–∞–¥–∞–Ω–∏–∏, –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤ —Ñ–æ—Ä–º–µ –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

#### `–û–¥–Ω–æ–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –ò–º—è–û—á–µ—Ä–µ–¥–∏)`

–ü–æ–ª—É—á–∞–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–∞–Ω–∞–ª` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞
- `–ò–º—è–û—á–µ—Ä–µ–¥–∏` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è –æ—á–µ—Ä–µ–¥–∏

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–ë—É–ª–µ–≤–æ` ‚Äî `–ò—Å—Ç–∏–Ω–∞`, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ

**–ü—Ä–∏–º–µ—Ä:**

```bsl
–ï—Å–ª–∏ –ö–ª–∏–µ–Ω—ÇRMQ.–û–¥–Ω–æ–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, "my_queue") –¢–æ–≥–¥–∞
    –°–æ–æ–±—â–µ–Ω–∏–µ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è();
    –°–æ–æ–±—â–∏—Ç—å("–ü–æ–ª—É—á–µ–Ω–æ: " + –°–æ–æ–±—â–µ–Ω–∏–µ.–î–∞–Ω–Ω—ã–µ);
    –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –°–æ–æ–±—â–µ–Ω–∏–µ.–¢–µ–≥);
–ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
```

#### `–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è()`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —á–µ—Ä–µ–∑ `–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ` –∏–ª–∏ `–û–¥–Ω–æ–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ`.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ (`–¢–∏–ø="Message"`) —Å –ø–æ–ª—è–º–∏:
- `–î–∞–Ω–Ω—ã–µ` ‚Äî —Ç–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞)
- `–¢–µ–≥` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–µ–≥ –¥–æ—Å—Ç–∞–≤–∫–∏ (–¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è)
- `–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ AMQP
- `–ó–∞–≥–æ–ª–æ–≤–∫–∏` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

–ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å `–¢–∏–ø="Error"`.

#### `–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –¢–µ–≥–°–æ–æ–±—â–µ–Ω–∏—è)`

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è (ACK).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–∞–Ω–∞–ª` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞
- `–¢–µ–≥–°–æ–æ–±—â–µ–Ω–∏—è` (–ß–∏—Å–ª–æ) ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–µ–≥ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

> **üí° –í–∞–∂–Ω–æ:** –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —Å `no_ack = –õ–æ–∂—å`. –ù–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–µ—Ä–Ω—É—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–∞–Ω–∞–ª–∞.

#### `–û—Ç–∫–ª–æ–Ω–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –¢–µ–≥–°–æ–æ–±—â–µ–Ω–∏—è, –í–µ—Ä–Ω—É—Ç—å–í–ò—Å—Ö–æ–¥–Ω—É—é–û—á–µ—Ä–µ–¥—å)`

–û—Ç–∫–ª–æ–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ (NACK).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–∞–Ω–∞–ª` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞
- `–¢–µ–≥–°–æ–æ–±—â–µ–Ω–∏—è` (–ß–∏—Å–ª–æ) ‚Äî —Ç–µ–≥ –¥–æ—Å—Ç–∞–≤–∫–∏
- `–í–µ—Ä–Ω—É—Ç—å–í–ò—Å—Ö–æ–¥–Ω—É—é–û—á–µ—Ä–µ–¥—å` (–ë—É–ª–µ–≤–æ) ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º:
  - `–ò—Å—Ç–∏–Ω–∞` ‚Äî –≤–µ—Ä–Ω—É—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (requeue)
  - `–õ–æ–∂—å` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Dead Letter Exchange
    - –ï—Å–ª–∏ –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ **–Ω–µ —É–∫–∞–∑–∞–Ω** –∞—Ä–≥—É–º–µ–Ω—Ç `x-dead-letter-exchange`, —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç **—É–¥–∞–ª–µ–Ω–æ**
    - –ï—Å–ª–∏ **—É–∫–∞–∑–∞–Ω** ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, —Å–≤—è–∑–∞–Ω–Ω—É—é —Å DLX

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä —Å Dead Letter Exchange:**

```bsl
// 1. –°–æ–∑–¥–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ —Å DLX
–ê—Ä–≥—É–º–µ–Ω—Ç—ãDLX = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ãDLX.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-dead-letter-exchange", "dlx_exchange", "—Å—Ç—Ä–æ–∫–∞"));
–ê—Ä–≥—É–º–µ–Ω—Ç—ãDLX.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-dead-letter-routing-key", "failed", "—Å—Ç—Ä–æ–∫–∞"));

–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "task_queue", "", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –õ–æ–∂—å, –ê—Ä–≥—É–º–µ–Ω—Ç—ãDLX);

// 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º
–ü–æ–ø—ã—Ç–∫–∞
    –í—ã–ø–æ–ª–Ω–∏—Ç—å–ó–∞–¥–∞—á—É(–î–∞–Ω–Ω—ã–µ.–î–∞–Ω–Ω—ã–µ);
    –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ.–¢–µ–≥);
–ò—Å–∫–ª—é—á–µ–Ω–∏–µ
    // –û—Ç–∫–ª–æ–Ω–∏—Ç—å –ë–ï–ó –≤–æ–∑–≤—Ä–∞—Ç–∞ = –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ DLX –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    –ö–ª–∏–µ–Ω—ÇRMQ.–û—Ç–∫–ª–æ–Ω–∏—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ.–¢–µ–≥, –õ–æ–∂—å);
–ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
```

---

### 4.6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º–∏

#### `–û—Ç–º–µ–Ω–∏—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ü–æ–ª—É—á–∞—Ç–µ–ª—å)`

–û—Ç–º–µ–Ω—è–µ—Ç (—É–¥–∞–ª—è–µ—Ç) –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –ø—Ä–µ–∫—Ä–∞—â–∞—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ü–æ–ª—É—á–∞—Ç–µ–ª—å` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞—Ç–µ–ª—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä–æ–∫–∞` ‚Äî `"consumer canceled"` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ

**–í–∞–∂–Ω–æ:** –ü–æ–ª—É—á–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –ø–æ —Ç–µ–≥—É, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `–¢—ç–≥–ü–æ–ª—É—á–∞—Ç–µ–ª—è`.

```bsl
// –°–æ–∑–¥–∞–Ω–∏–µ —Å —Ç–µ–≥–æ–º
–ü–æ–ª—É—á–∞—Ç–µ–ª—å = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ö–∞–Ω–∞–ª, "task_queue", "worker-1", –õ–æ–∂—å);

// –†–∞–±–æ—Ç–∞...

// –û—Ç–º–µ–Ω–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
–û—Ç–≤–µ—Ç = –ö–ª–∏–µ–Ω—ÇRMQ.–û—Ç–º–µ–Ω–∏—Ç—å–ü–æ–ª—É—á–∞—Ç–µ–ª—è(–ü–æ–ª—É—á–∞—Ç–µ–ª—å);
```

#### `–ü–æ–ª—É—á–∏—Ç—å–°–ø–∏—Å–æ–∫–ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π–°–æ–æ–±—â–µ–Ω–∏–π()`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π (consumers) –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–ú–∞—Å—Å–∏–≤` ‚Äî —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è—Ö

```bsl
–ö–ª–∏–µ–Ω—ÇRMQ = –û–±—Ä–∞–±–æ—Ç–∫–∏.–ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å();
–°–ø–∏—Å–æ–∫–ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–ª—É—á–∏—Ç—å–°–ø–∏—Å–æ–∫–ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π–°–æ–æ–±—â–µ–Ω–∏–π();

–î–ª—è –ö–∞–∂–¥–æ–≥–æ –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ò–∑ –°–ø–∏—Å–æ–∫–ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π –¶–∏–∫–ª
    –ï—Å–ª–∏ –¢–∏–ø–ó–Ω—á(–ü–æ–ª—É—á–∞—Ç–µ–ª—å) = –¢–∏–ø("–°—Ç—Ä—É–∫—Ç—É—Ä–∞") –ò –ü–æ–ª—É—á–∞—Ç–µ–ª—å.–°–≤–æ–π—Å—Ç–≤–æ("–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å–¢–µ–≥") –¢–æ–≥–¥–∞
        –°–æ–æ–±—â–∏—Ç—å("–ê–∫—Ç–∏–≤–Ω—ã–π consumer: " + –ü–æ–ª—É—á–∞—Ç–µ–ª—å.–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å–¢–µ–≥);
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
–ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
```

#### `–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–û–∂–∏–¥–∞–Ω–∏–µ–°–æ–æ–±—â–µ–Ω–∏—è(–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å–î–ª—è–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–û–∂–∏–¥–∞–Ω–∏—è)`

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—é, –ø—Ä–µ—Ä—ã–≤–∞—è –±–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ü–∏–∫–ª `–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ()`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å–î–ª—è–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–û–∂–∏–¥–∞–Ω–∏—è` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ç–µ–≥–æ–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
  - –°–æ–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `–°—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ–ª—É—á–∞—Ç–µ–ª—è–î–ª—è–ü—Ä–µ—Ä—ã–≤–∞–Ω—è–û–∂–∏–¥–∞–Ω–∏—è(–¢–µ–≥–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è)`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

```bsl
// –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
–°—Ç—Ä—É–∫—Ç—É—Ä–∞–û—Å—Ç–∞–Ω–æ–≤–∫–∏ = –ö–ª–∏–µ–Ω—ÇRMQ.–°—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ–ª—É—á–∞—Ç–µ–ª—è–î–ª—è–ü—Ä–µ—Ä—ã–≤–∞–Ω—è–û–∂–∏–¥–∞–Ω–∏—è("worker-1");

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (–∏–∑ –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞/—Å–µ—Å—Å–∏–∏)
–û—Ç–≤–µ—Ç = –ö–ª–∏–µ–Ω—ÇRMQ.–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–û–∂–∏–¥–∞–Ω–∏–µ–°–æ–æ–±—â–µ–Ω–∏—è(–°—Ç—Ä—É–∫—Ç—É—Ä–∞–û—Å—Ç–∞–Ω–æ–≤–∫–∏);
```

#### `–ü–∏–Ω–≥–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è(–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å–î–ª—è–ü–∏–Ω–≥–∞)`

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ping-—Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (health check).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å–î–ª—è–ü–∏–Ω–≥–∞` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ç–µ–≥–æ–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
  - –°–æ–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `–°—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ–ª—É—á–∞—Ç–µ–ª—è–î–ª—è–ü–∏–Ω–≥–∞(–¢–µ–≥–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è)`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

```bsl
–°—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–∏–Ω–≥–∞ = –ö–ª–∏–µ–Ω—ÇRMQ.–°—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ–ª—É—á–∞—Ç–µ–ª—è–î–ª—è–ü–∏–Ω–≥–∞("worker-1");
–û—Ç–≤–µ—Ç = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–∏–Ω–≥–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è(–°—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–∏–Ω–≥–∞);
```

> **üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ "–∑–¥–æ—Ä–æ–≤—å—è" RMQ-–∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤ —Ñ–æ–Ω–µ –æ–∂–∏–¥–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è. –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–º. –≤ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–Ω–æ–º –∑–∞–¥–∞–Ω–∏–∏ `–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥RMQ` –≤ –¥–µ–º–æ-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

### 4.7. –û–±–º–µ–Ω–Ω–∏–∫–∏ (Exchanges)

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ **–ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –æ–±–º–µ–Ω–Ω–∏–∫–∞–º** RabbitMQ:

```bsl
–ö–ª–∏–µ–Ω—ÇRMQ.Exchange_direct()       // "amq.direct"
–ö–ª–∏–µ–Ω—ÇRMQ.Exchange_fanout()       // "amq.fanout"
–ö–ª–∏–µ–Ω—ÇRMQ.Exchange_topic()        // "amq.topic"
–ö–ª–∏–µ–Ω—ÇRMQ.Exchange_headers()      // "amq.headers"
–ö–ª–∏–µ–Ω—ÇRMQ.Exchange_match()        // "amq.match"
–ö–ª–∏–µ–Ω—ÇRMQ.Exchange_rabbitmq_trace() // "amq.rabbitmq.trace"
```

> **‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –í API –Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `–û–±—ä—è–≤–∏—Ç—å–û–±–º–µ–Ω–Ω–∏–∫()`. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ–±–º–µ–Ω–Ω–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Management UI RabbitMQ.

---

### 4.8. –°–≤–æ–π—Å—Ç–≤–∞ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

#### `–ù–æ–≤—ã–µ–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è(content_type, content_encoding, priority, correlation_id, reply_to, expiration, message_id, timestamp, type, user_id, app_id, cluster_id)`

–°–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–≤–æ–π—Å—Ç–≤ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ AMQP.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤—Å–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã):**
- `content_type` (–°—Ç—Ä–æ–∫–∞) ‚Äî —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"application/json"`, `"text/plain"`)
- `content_encoding` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"utf-8"`, `"gzip"`, `"zstd"`)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–∂–∞—Ç–∏—è
- `priority` (–ß–∏—Å–ª–æ) ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (0-255)
- `correlation_id` (–°—Ç—Ä–æ–∫–∞) ‚Äî ID –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ (–¥–ª—è —Å–≤—è–∑–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞ –≤ RPC)
- `reply_to` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ (–¥–ª—è RPC)
- `expiration` (–°—Ç—Ä–æ–∫–∞) ‚Äî TTL —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (**—Å—Ç—Ä–æ–∫–∞!**, –Ω–∞–ø—Ä–∏–º–µ—Ä `"60000"`)
- `message_id` (–°—Ç—Ä–æ–∫–∞) ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–æ–æ–±—â–µ–Ω–∏—è
- `timestamp` (–°—Ç—Ä–æ–∫–∞) ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
- `type` (–°—Ç—Ä–æ–∫–∞) ‚Äî —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø–æ–ª–µ)
- `user_id` (–°—Ç—Ä–æ–∫–∞) ‚Äî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `app_id` (–°—Ç—Ä–æ–∫–∞) ‚Äî ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `cluster_id` (–°—Ç—Ä–æ–∫–∞) ‚Äî ID –∫–ª–∞—Å—Ç–µ—Ä–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî —Å–≤–æ–π—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**

```bsl
// RPC: –∑–∞–ø—Ä–æ—Å
–°–≤–æ–π—Å—Ç–≤–∞ = –ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–µ–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è();
–°–≤–æ–π—Å—Ç–≤–∞.reply_to = "amq.gen-callback";
–°–≤–æ–π—Å—Ç–≤–∞.correlation_id = –°—Ç—Ä–æ–∫–∞(–ù–æ–≤—ã–π –£–Ω–∏–∫–∞–ª—å–Ω—ã–π–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä());
–°–≤–æ–π—Å—Ç–≤–∞.expiration = "60000"; // 60 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ—Ç–≤–µ—Ç

// JSON —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
–°–≤–æ–π—Å—Ç–≤–∞ = –ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–µ–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è(
    "application/json",  // content_type
    "utf-8",             // content_encoding
    5                    // priority (0-10, –≥–¥–µ 10 - –Ω–∞–∏–≤—ã—Å—à–∏–π)
);

// –°–æ–æ–±—â–µ–Ω–∏–µ —Å TTL
–°–≤–æ–π—Å—Ç–≤–∞ = –ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–µ–°–≤–æ–π—Å—Ç–≤–∞–°–æ–æ–±—â–µ–Ω–∏—è();
–°–≤–æ–π—Å—Ç–≤–∞.expiration = "30000"; // —É–¥–∞–ª–∏—Ç—Å—è —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥, –µ—Å–ª–∏ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
```

#### `–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫(–ö–ª—é—á, –ó–Ω–∞—á–µ–Ω–∏–µ, –ó–∞–≥–æ–ª–æ–≤–∫–∏)`

–î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–ª—é—á` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
- `–ó–Ω–∞—á–µ–Ω–∏–µ` (–°—Ç—Ä–æ–∫–∞, –ß–∏—Å–ª–æ) ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- `–ó–∞–≥–æ–ª–æ–≤–∫–∏` (–ú–∞—Å—Å–∏–≤/–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ) ‚Äî —Ç–µ–∫—É—â–∏–π –º–∞—Å—Å–∏–≤ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–ú–∞—Å—Å–∏–≤` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä:**

```bsl
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ;
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫("x-source", "1C", –ó–∞–≥–æ–ª–æ–≤–∫–∏);
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫("x-version", "8.3.24", –ó–∞–≥–æ–ª–æ–≤–∫–∏);
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫("x-priority", "high", –ó–∞–≥–æ–ª–æ–≤–∫–∏);
–ó–∞–≥–æ–ª–æ–≤–∫–∏ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–æ–±–∞–≤–∏—Ç—å–ó–∞–≥–æ–ª–æ–≤–æ–∫("x-retry-count", 3, –ó–∞–≥–æ–ª–æ–≤–∫–∏);

–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, –î–∞–Ω–Ω—ã–µ, "queue", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –ó–∞–≥–æ–ª–æ–≤–∫–∏);
```

---

### 4.9. –ê—Ä–≥—É–º–µ–Ω—Ç—ã –æ—á–µ—Ä–µ–¥–µ–π –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π

#### `–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç(–ö–ª—é—á, –ó–Ω–∞—á–µ–Ω–∏–µ, –¢–∏–ø)`

–°–æ–∑–¥–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–µ–π, –∫–∞–Ω–∞–ª–æ–≤ –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π. –í —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ RabbitMQ/AMQP —ç—Ç–æ `FieldTable` –∏–ª–∏ `Table`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ö–ª—é—á` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∏–º—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"x-queue-type"`, `"x-message-ttl"`)
- `–ó–Ω–∞—á–µ–Ω–∏–µ` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ —á–∏—Å–ª–æ)
- `–¢–∏–ø` (–°—Ç—Ä–æ–∫–∞, –æ–ø—Ü.) ‚Äî —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è: `"—Å—Ç—Ä–æ–∫–∞"`, `"—á–∏—Å–ª–æ"`, `"timestamp"`
  - –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∏–ø—É `–ó–Ω–∞—á–µ–Ω–∏–µ`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –º–∞—Å—Å–∏–≤–µ `–ê—Ä–≥—É–º–µ–Ω—Ç—ã`

**–ü—Ä–∏–º–µ—Ä—ã:**

```bsl
// Stream Queue (RabbitMQ 3.9+)
–ê—Ä–≥—É–º–µ–Ω—Ç—ã = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-queue-type", "stream", "—Å—Ç—Ä–æ–∫–∞"));
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "my_stream", "", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –õ–æ–∂—å, –ê—Ä–≥—É–º–µ–Ω—Ç—ã);

// TTL –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏ (60 —Å–µ–∫—É–Ω–¥)
–ê—Ä–≥—É–º–µ–Ω—Ç—ã = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-message-ttl", 60000, "—á–∏—Å–ª–æ"));
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "temp_queue", "", "", –õ–æ–∂—å, –õ–æ–∂—å, –õ–æ–∂—å, –ê—Ä–≥—É–º–µ–Ω—Ç—ã);

// Dead Letter Exchange
–ê—Ä–≥—É–º–µ–Ω—Ç—ã = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-dead-letter-exchange", "dlx_exchange", "—Å—Ç—Ä–æ–∫–∞"));
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-dead-letter-routing-key", "failed", "—Å—Ç—Ä–æ–∫–∞"));
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "tasks", "", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –õ–æ–∂—å, –ê—Ä–≥—É–º–µ–Ω—Ç—ã);

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ (–º–∞–∫—Å–∏–º—É–º 1000 —Å–æ–æ–±—â–µ–Ω–∏–π)
–ê—Ä–≥—É–º–µ–Ω—Ç—ã = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-max-length", 1000, "—á–∏—Å–ª–æ"));
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "limited_queue", "", "", –õ–æ–∂—å, –õ–æ–∂—å, –õ–æ–∂—å, –ê—Ä–≥—É–º–µ–Ω—Ç—ã);

// Lazy Queue (—Å–æ–æ–±—â–µ–Ω–∏—è —Å—Ä–∞–∑—É –Ω–∞ –¥–∏—Å–∫)
–ê—Ä–≥—É–º–µ–Ω—Ç—ã = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-queue-mode", "lazy", "—Å—Ç—Ä–æ–∫–∞"));
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "lazy_queue", "", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –õ–æ–∂—å, –ê—Ä–≥—É–º–µ–Ω—Ç—ã);

// –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å (0-10)
–ê—Ä–≥—É–º–µ–Ω—Ç—ã = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-max-priority", 10, "—á–∏—Å–ª–æ"));
–ö–ª–∏–µ–Ω—ÇRMQ.–û–±—ä—è–≤–∏—Ç—å–û—á–µ—Ä–µ–¥—å(–ö–∞–Ω–∞–ª, "priority_queue", "", "", –ò—Å—Ç–∏–Ω–∞, –õ–æ–∂—å, –õ–æ–∂—å, –ê—Ä–≥—É–º–µ–Ω—Ç—ã);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞
–ê—Ä–≥—É–º–µ–Ω—Ç—ã = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-message-ttl", 30000)); // —Ç–∏–ø "—á–∏—Å–ª–æ"
–ê—Ä–≥—É–º–µ–Ω—Ç—ã.–î–æ–±–∞–≤–∏—Ç—å(–ö–ª–∏–µ–Ω—ÇRMQ.–ù–æ–≤—ã–π–ê—Ä–≥—É–º–µ–Ω—Ç("x-queue-type", "stream")); // —Ç–∏–ø "—Å—Ç—Ä–æ–∫–∞"
```

**–ü–æ–ª–µ–∑–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π:**

| –ê—Ä–≥—É–º–µ–Ω—Ç | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `x-queue-type` | –°—Ç—Ä–æ–∫–∞ | –¢–∏–ø –æ—á–µ—Ä–µ–¥–∏: `"classic"`, `"quorum"`, `"stream"` |
| `x-message-ttl` | –ß–∏—Å–ª–æ | TTL –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö |
| `x-expires` | –ß–∏—Å–ª–æ | –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –æ—á–µ—Ä–µ–¥–∏ (–º—Å) |
| `x-max-length` | –ß–∏—Å–ª–æ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π |
| `x-max-length-bytes` | –ß–∏—Å–ª–æ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –≤ –±–∞–π—Ç–∞—Ö |
| `x-dead-letter-exchange` | –°—Ç—Ä–æ–∫–∞ | –û–±–º–µ–Ω–Ω–∏–∫ –¥–ª—è "–º–µ—Ä—Ç–≤—ã—Ö" —Å–æ–æ–±—â–µ–Ω–∏–π |
| `x-dead-letter-routing-key` | –°—Ç—Ä–æ–∫–∞ | Routing key –¥–ª—è DLX |
| `x-max-priority` | –ß–∏—Å–ª–æ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π (0-255) |
| `x-queue-mode` | –°—Ç—Ä–æ–∫–∞ | –†–µ–∂–∏–º: `"default"` –∏–ª–∏ `"lazy"` |
| `x-single-active-consumer` | –ë—É–ª–µ–≤–æ | –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π consumer |

> **üìñ –°–ø—Ä–∞–≤–∫–∞:** –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Å–º. –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ RabbitMQ](https://www.rabbitmq.com/queues.html#optional-arguments)

---

### 4.10. –°–∂–∞—Ç–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

#### `–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è(–ê–ª–≥–æ—Ä–∏—Ç–º, –£—Ä–æ–≤–µ–Ω—å–°–∂–∞—Ç–∏—è)`

–°–æ–∑–¥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–∂–∞—Ç–∏—è —Ç–µ–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ê–ª–≥–æ—Ä–∏—Ç–º` (–°—Ç—Ä–æ–∫–∞) ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º —Å–∂–∞—Ç–∏—è:
  - `"zstd"` ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –æ—Ç Facebook (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
  - `"gzip"` ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- `–£—Ä–æ–≤–µ–Ω—å–°–∂–∞—Ç–∏—è` (–ß–∏—Å–ª–æ, –æ–ø—Ü.) ‚Äî —É—Ä–æ–≤–µ–Ω—å —Å–∂–∞—Ç–∏—è:
  - –î–ª—è `zstd`: 1-22 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **22** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç–µ)
  - –î–ª—è `gzip`: 1-9 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **4** ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å)
  - –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∂–∞—Ç–∏—è

**–í–∞–∂–Ω–æ:** 
- –ü—Ä–∏ —Å–∂–∞—Ç–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ `content_encoding` –≤ –∑–Ω–∞—á–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
- –ü–æ–ª—É—á–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ `content_encoding`

**–ü—Ä–∏–º–µ—Ä—ã:**

```bsl
// –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (zstd, —É—Ä–æ–≤–µ–Ω—å 22)
–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è = –ö–ª–∏–µ–Ω—ÇRMQ.–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è(–ö–ª–∏–µ–Ω—ÇRMQ.–ê–ª–≥–æ—Ä–∏—Ç–º–°–∂–∞—Ç–∏—è_zstd(), 22);

// gzip (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏)
–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è = –ö–ª–∏–µ–Ω—ÇRMQ.–ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è(–ö–ª–∏–µ–Ω—ÇRMQ.–ê–ª–≥–æ—Ä–∏—Ç–º–°–∂–∞—Ç–∏—è_gzip(), 4);

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∂–∞—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
–ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(
    –ö–∞–Ω–∞–ª, 
    –ë–æ–ª—å—à–∏–µ–î–∞–Ω–Ω—ã–µ,  // —Å—Ç—Ä–æ–∫–∞ > 10 KB
    "big_data", 
    "", 
    –ò—Å—Ç–∏–Ω–∞, 
    –ò—Å—Ç–∏–Ω–∞, 
    –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, 
    –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, 
    –ù–∞—Å—Ç—Ä–æ–π–∫–∏–°–∂–∞—Ç–∏—è
);

// –ü–æ–ª—É—á–µ–Ω–∏–µ - —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è!
–ï—Å–ª–∏ –ö–ª–∏–µ–Ω—ÇRMQ.–°–ª–µ–¥—É—é—â–µ–µ–°–æ–æ–±—â–µ–Ω–∏–µ(–ü–æ–ª—É—á–∞—Ç–µ–ª—å) –¢–æ–≥–¥–∞
    –î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è = –ö–ª–∏–µ–Ω—ÇRMQ.–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è();
    // –î–∞–Ω–Ω—ã–µ —É–∂–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω—ã!
    –û–±—Ä–∞–±–æ—Ç–∞—Ç—å(–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è.–î–∞–Ω–Ω—ã–µ);
–ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∂–∞—Ç–∏–µ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π **> 10 KB**
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ **zstd —É—Ä–æ–≤–µ–Ω—å 22** ‚Äî –ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ gzip (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:** —É—á–∏—Ç—ã–≤–∞–π—Ç–µ –ª–∏–º–∏—Ç 10'000 —Å–∏–º–≤–æ–ª–æ–≤ **–¥–æ** —Å–∂–∞—Ç–∏—è

#### `–ê–ª–≥–æ—Ä–∏—Ç–º–°–∂–∞—Ç–∏—è_zstd()` / `–ê–ª–≥–æ—Ä–∏—Ç–º–°–∂–∞—Ç–∏—è_gzip()`

–í–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Å–∂–∞—Ç–∏—è.

```bsl
–ö–ª–∏–µ–Ω—ÇRMQ.–ê–ª–≥–æ—Ä–∏—Ç–º–°–∂–∞—Ç–∏—è_zstd()  // "zstd"
–ö–ª–∏–µ–Ω—ÇRMQ.–ê–ª–≥–æ—Ä–∏—Ç–º–°–∂–∞—Ç–∏—è_gzip()  // "gzip"
```

---

### 4.11. Publisher Confirms

–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

#### `–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–°–µ—Ä–≤–µ—Ä–∞_–°–µ—Ä–≤–µ—Ä–ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–ü–æ–ª—É—á–µ–Ω–∏–µ–°–æ–æ–±—â–µ–Ω–∏—è()`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `"is_ack"` ‚Äî —Å–µ—Ä–≤–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–ª—É—á–µ–Ω–∏–µ

#### `–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–°–µ—Ä–≤–µ—Ä–∞_–°–µ—Ä–≤–µ—Ä_–ù–ï_–ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–ü–æ–ª—É—á–µ–Ω–∏–µ–°–æ–æ–±—â–µ–Ω–∏—è()`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `"is_nack"` ‚Äî —Å–µ—Ä–≤–µ—Ä –ù–ï –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª (–æ—à–∏–±–∫–∞)

#### `–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–°–µ—Ä–≤–µ—Ä–∞_–ù–µ–ó–∞–ø—Ä–∞—à–∏–≤–∞–ª–æ—Å—å–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ()`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `"not_requested"` ‚Äî —Ä–µ–∂–∏–º confirm –Ω–µ –±—ã–ª –≤–∫–ª—é—á–µ–Ω

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```bsl
// –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º confirm –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞–Ω–∞–ª–∞
–ö–∞–Ω–∞–ª = –ö–ª–∏–µ–Ω—ÇRMQ.–°–æ–∑–¥–∞—Ç—å–ö–∞–Ω–∞–ª(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ò—Å—Ç–∏–Ω–∞);

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
–û—Ç–≤–µ—Ç = –ö–ª–∏–µ–Ω—ÇRMQ.–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(–ö–∞–Ω–∞–ª, "Important data", "critical_queue");

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
–ï—Å–ª–∏ –û—Ç–≤–µ—Ç.–¢–µ–∫—Å—Ç = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–°–µ—Ä–≤–µ—Ä–∞_–°–µ—Ä–≤–µ—Ä–ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–ü–æ–ª—É—á–µ–Ω–∏–µ–°–æ–æ–±—â–µ–Ω–∏—è() –¢–æ–≥–¥–∞
    –°–æ–æ–±—â–∏—Ç—å("‚úì –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞");
–ò–Ω–∞—á–µ–ï—Å–ª–∏ –û—Ç–≤–µ—Ç.–¢–µ–∫—Å—Ç = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–°–µ—Ä–≤–µ—Ä–∞_–°–µ—Ä–≤–µ—Ä_–ù–ï_–ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–ü–æ–ª—É—á–µ–Ω–∏–µ–°–æ–æ–±—â–µ–Ω–∏—è() –¢–æ–≥–¥–∞
    –í—ã–∑–≤–∞—Ç—å–ò—Å–∫–ª—é—á–µ–Ω–∏–µ "‚úó –û—à–∏–±–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è!";
–ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
```

> **‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è "—Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ–º". –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∏ –ø–∞–∫–µ—Ç–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã.

---

### 4.12. –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### `–≠—Ç–æ–û—à–∏–±–∫–∞(–°—Ç—Ä—É–∫—Ç—É—Ä–∞)`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ—à–∏–±–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–°—Ç—Ä—É–∫—Ç—É—Ä–∞` (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `–ë—É–ª–µ–≤–æ` ‚Äî `–ò—Å—Ç–∏–Ω–∞`, –µ—Å–ª–∏ —ç—Ç–æ –æ—à–∏–±–∫–∞

```bsl
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ = –ö–ª–∏–µ–Ω—ÇRMQ.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É(–°—Ç—Ä–æ–∫–∞–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è);
–ï—Å–ª–∏ –ö–ª–∏–µ–Ω—ÇRMQ.–≠—Ç–æ–û—à–∏–±–∫–∞(–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ) –¢–æ–≥–¥–∞
    –ó–∞–ø–∏—Å—å–õ–æ–≥–∞–°–∏—Å—Ç–µ–º—ã("RabbitMQ", –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.–¢–µ–∫—Å—Ç, , , –£—Ä–æ–≤–µ–Ω—å–õ–æ–≥–∞–°–∏—Å—Ç–µ–º—ã.–û—à–∏–±–∫–∞);
    –í–æ–∑–≤—Ä–∞—Ç;
–ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
```

#### `–≠—Ç–æ–°–µ—Ä–≤–∏—Å–Ω–æ–µ–°–æ–æ–±—â–µ–Ω–∏–µ(–°—Ç—Ä—É–∫—Ç—É—Ä–∞)` / `–≠—Ç–æ–û—Ç–≤–µ—Ç–ù–∞–ü–∏–Ω–≥(–°—Ç—Ä—É–∫—Ç—É—Ä–∞)`

–ü—Ä–æ–≤–µ—Ä—è—é—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª—É–∂–µ–±–Ω—ã–º (ping/pong).

```bsl
–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è = –ö–ª–∏–µ–Ω—ÇRMQ.–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è();
–ï—Å–ª–∏ –ö–ª–∏–µ–Ω—ÇRMQ.–≠—Ç–æ–û—Ç–≤–µ—Ç–ù–∞–ü–∏–Ω–≥(–î–∞–Ω–Ω—ã–µ–°–æ–æ–±—â–µ–Ω–∏—è) –¢–æ–≥–¥–∞
    // –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –Ω–∞ ping, –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å;
–ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
```

#### `–°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å(–ó–Ω–∞—á–µ–Ω–∏–µ)` / `–î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å(–°—Ç—Ä–æ–∫–∞)`

–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤/–∏–∑ JSON.

```bsl
// –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞("–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ", "–¢–æ–≤–∞—Ä", 10);
JSON = –ö–ª–∏–µ–Ω—ÇRMQ.–°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å(–°—Ç—Ä—É–∫—Ç—É—Ä–∞);

// –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ = –ö–ª–∏–µ–Ω—ÇRMQ.–î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å(JSON);
```

#### `–ó–∞–ø–∏—Å—å–õ–æ–≥–∞(–ü—É—Ç—å)`

–í–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `–ü—É—Ç—å` (–°—Ç—Ä–æ–∫–∞) ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–∞
  - –ï—Å–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ `""`, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è

```bsl
// –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏!)
–ö–ª–∏–µ–Ω—ÇRMQ.–ó–∞–ø–∏—Å—å–õ–æ–≥–∞("C:\logs\rabbitmq_debug.log");

// –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—É–¥—É—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è

// –í—ã–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ö–ª–∏–µ–Ω—ÇRMQ.–ó–∞–ø–∏—Å—å–õ–æ–≥–∞("");
```

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**, –Ω–∏–∫–æ–≥–¥–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

