# RabbitMQ –¥–ª—è 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ ‚Äî Docker Setup

–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ RabbitMQ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–π 1CRabbitMQ.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å RabbitMQ
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f rabbitmq

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
docker-compose down -v
```

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ—Ä—Ç—ã
- **5672** ‚Äî AMQP –ø–æ—Ä—Ç (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ 1–°)
- **15672** ‚Äî Management UI (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

### –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `rmuser`
- **–ü–∞—Ä–æ–ª—å:** `rmpassword`

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –î–ª—è production –∏–∑–º–µ–Ω–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ `docker-compose.yml`!

### –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ 1–°

```bsl
–°—Ç—Ä–æ–∫–∞–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "amqp://rmuser:rmpassword@localhost:5672/%2f";
```

## üåê Management UI

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:15672**

- –õ–æ–≥–∏–Ω: `rmuser`
- –ü–∞—Ä–æ–ª—å: `rmpassword`

–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤—ã –º–æ–∂–µ—Ç–µ:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- –°–æ–∑–¥–∞–≤–∞—Ç—å –æ–±–º–µ–Ω–Ω–∏–∫–∏ (exchanges)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∫–∞–Ω–∞–ª—ã
- –£–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

## üíæ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –¥–∞–Ω–Ω—ã–µ RabbitMQ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `./rabbitmq_data` –Ω–∞ —Ö–æ—Å—Ç–µ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
- –û—á–µ—Ä–µ–¥–∏, –æ–±–º–µ–Ω–Ω–∏–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `docker-compose down` –¥–∞–Ω–Ω—ã–µ –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è
- –î–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose down -v`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ production

–î–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ò–∑–º–µ–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   ```yaml
   environment:
     RABBITMQ_DEFAULT_USER: your_secure_user
     RABBITMQ_DEFAULT_PASS: your_secure_password_here
   ```

2. **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º:**
   ```yaml
   ports:
     - "127.0.0.1:5672:5672"   # –¢–æ–ª—å–∫–æ localhost
     - "127.0.0.1:15672:15672" # –¢–æ–ª—å–∫–æ localhost
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```yaml
   volumes:
     - ./rabbitmq.conf:/etc/rabbitmq/rabbitmq.conf
   ```

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã:**
   ```yaml
   deploy:
     resources:
       limits:
         cpus: '2'
         memory: 2G
       reservations:
         cpus: '1'
         memory: 1G
   ```

## üêõ Troubleshooting

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs rabbitmq

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps
```

### –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç

–ï—Å–ª–∏ –ø–æ—Ä—Ç 5672 –∏–ª–∏ 15672 —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `docker-compose.yml`:

```yaml
ports:
  - "5673:5672"    # –ò—Å–ø–æ–ª—å–∑—É–µ–º 5673 –≤–º–µ—Å—Ç–æ 5672
  - "15673:15672"  # –ò—Å–ø–æ–ª—å–∑—É–µ–º 15673 –≤–º–µ—Å—Ç–æ 15672
```

### –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Management UI

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker-compose ps`
2. –ü–æ—Ä—Ç 15672 –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Ñ–∞–π—Ä–≤–æ–ª–æ–º
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

RabbitMQ —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 2GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `disk_free_limit`). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
df -h
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è RabbitMQ](https://www.rabbitmq.com/documentation.html)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å 1–°](./Lesson1_ru.md)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã 1CRabbitMQ](./1CRabbitMQ/README.md)
- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](./Component_API_Documentation.md)

---

**–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!** üéâ –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —É—Ä–æ–∫–æ–≤.

